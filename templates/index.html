<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="google" content="notranslate">
    <link href="https://cdn.jsdelivr.net/npm/beercss@3.7.12/dist/cdn/beer.min.css" rel="stylesheet" />
    <script type="module" src="https://cdn.jsdelivr.net/npm/beercss@3.7.12/dist/cdn/beer.min.js"></script>
    <script type="module"
        src="https://cdn.jsdelivr.net/npm/material-dynamic-colors@1.1.2/dist/cdn/material-dynamic-colors.min.js">
    </script>
    <link href="/static/theme.css" rel="stylesheet">
    <link rel="icon" href="/static/icon.png">
    <title>HBNI Audio Archive</title>
    <meta property="og:title" content="HBNI Audio Archive" />
    <meta property="og:url" content="https://audioarchives.hbni.net" />
    <meta property="og:image" content="https://audioarchives.hbni.net/static/icon.png" />
    <meta property="og:description" content="Download or relisten to previously broadcasted streams." />
</head>

<style>
    html,
    body,
    div,
    article,
    p,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    ul,
    li,
    span,
    a,
    button,
    input,
    textarea,
    select,
    details,
    summary,
    footer,
    nav {
        transition: background-color 0.3s ease-in-out, color 0.1s ease;
    }
    ::selection {
        color: var(--on-primary);
        background-color: var(--primary);
    }

    .hidden {
        display: none !important;
    }
    article {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }
</style>
<header class="fixed primary" id="main-header">
    <nav>
        <button class="circle transparent" onclick="ui('#info-dialog');">
            <img src="/static/icon.png" class="responsive">
        </button>
        <h5 class="max center-align small">HBNI Audio Archive</h5>
        <button class="circle transparent" onclick="mode()" id="toggle-theme">
            <i>dark_mode</i>
        </button>
    </nav>
</header>

<div class="overlay blur"></div>
<dialog id="faq-dialog">
    <div class="right-align">
        <button class="transparent circle" onclick="ui('#faq-dialog');">
            <i>close</i>
        </button>
    </div>
    <h3 class="center-align padding-bottom">Frequently Asked Questions</h3>
    <div>
        <h5> How do I play archives without downloading them? </h5>
        <h6> Apple </h6>
        <p>
            1. Install <a class="link" href="https://apps.apple.com/us/app/mega/id706857885">Mega</a> or <a
                class="link" href="https://apps.apple.com/ca/app/google-drive/id507874739">GoogleDrive</a> on your
            phone.
            (You
            may or
            may not have to create an account)
            2. Go to the <a class="link" href="http://audioarchives.hbni.net">HBNI archive</a> and press any archive
            you
            want to
            listen to.
            3. You will be redirected to the <a href="https://apps.apple.com/us/app/mega/id706857885">Mega</a>
            or <a class="link" href="https://apps.apple.com/ca/app/google-drive/id507874739">GoogleDrive</a> app.
            4. You can directly play the broadcast that way without downloading it to your device.
        </p>
        <h6> Android </h6>
        <p>
            1. Install <a class="link"
                href="https://play.google.com/store/apps/details?id=mega.privacy.android.app&hl=en_US&gl=US">Mega</a>
            or
            <a class="link"
                href="https://play.google.com/store/apps/details?id=com.google.android.apps.docs">GoogleDrive</a>
            on
            your
            phone. (You may or may not have to create an account)
            2. Go to the <a class="link" href="http://audioarchives.hbni.net">HBNI archive</a> and press any archive
            you
            want to
            listen to.
            3. You will be redirected to the <a class="link"
                href="https://play.google.com/store/apps/details?id=mega.privacy.android.app&hl=en_US&gl=US">Mega</a>
            or
            <a class="link"
                href="https://play.google.com/store/apps/details?id=com.google.android.apps.docs">GoogleDrive</a>
            app.
            4. You can directly play the broadcast that way without downloading it to your device.
        </p>
        <h6> Windows (Computer) </h6>
        <p>
            Just press on any archive on the <a class="link" href="http://audioarchives.hbni.net">HBNI archive</a>,
            you
            will be redirected to <a class="link" href="https://mega.nz">mega.nz</a> or <a class="link"
                href="https://drive.google.com">GoogleDrive</a>, from there you can just press play.
        </p>
        <h5> Where are the archives stored? </h5>
        <h6>
            2022-07-12 to 2023-07-21</h4>
            <p>
                The archives (as of 2022-07-12 to 2023-07-21) are stored on a file hosting website called <a
                    class="link" href="https://mega.nz">mega.nz</a>.
                The folder where all archives are stored online is <a class="link"
                    href="https://mega.nz/folder/CxF1AQwS#rucPTrUDuhHE5I76NtpkLA">here</a>.
            </p>
            <h6>2023-07-21 to 2023-07-29</h6>
            <p>
                The archives (as of 2023-07-21 to 2023-07-29) are stored on a file hosting website called <a
                    class="link" href="https://drive.google.com">GoogleDrive</a>.
                The folder where all archives are stored online is <a class="link"
                    href="https://drive.google.com/drive/u/0/folders/1ceDO2zOx8pdEzQDRa-aHXVXhXO-QT-cq">here</a>.
            </p>
            <h6>2023-07-29 to today</h6>
            <p>
                The archives (as of 2023-07-29 to today) are stored on our own servers in Pineland Colony.
            </p>
            <p>
                All data on each broadcast (date, length, host, description, etc...) can be found <a class="link"
                    href="http://audioarchives.hbni.net/download_links.json">here</a>.
                <p style="padding-left: 30px;"> This data is what the archive refers from, whatever changes in this
                    file,
                    changes on the <a class="link" href="http://audioarchives.hbni.net">HBNI archive</a>.
                </p>
                <h5> Why are you using both Mega and GoogleDrive? </h5>
                <p>
                    <a class="link" href="https://mega.nz">mega.nz</a> was easier and quicker to get started with
                    back in 2022.
                    However, I have ran out of storage space on my account and needed to
                    switch
                    over
                    to <a class="link" href="https://drive.google.com">GoogleDrive</a> which HBNI supported.
                </p>
                <h5> Why not migrate the entire database over to GoogleDrive?</h5>
                <p>
                    <a class="link" href="https://mega.nz">mega.nz</a> does not offer a easy way to migrate a
                    database. As time went
                    on
                    <a class="link" href="https://mega.nz">mega.nz</a> methods of uploading files has changed and
                    and the data that
                    is
                    required to migrate them is inconsistent, making it really difficult to port over. Some
                    broadcasts
                    would
                    be
                    lost in the process which is not ideal.
                </p>
                <h5> Why stop using GoogleDrive? </h5>
                <p>
                    Google does not allow the creation of a permanent access token to your GoogleDrive, I would have
                    to
                    manually refresh
                    the token every week or so to keep the system working, which is not ideal.
                </p>
                <h5> I want to remove a broadcast on the archive. </h5>
                <p>
                    Please email me the exact details at: <a class="link"
                        href="mailto:jared@pinelandfarms.ca">jared@pinelandfarms.ca</a>
                </p>
                <h5> I don't want any of my broadcasts on the archive and never be recorded. </h5>
                <p>
                    Please email me at: <a class="link"
                        href="mailto:jared@pinelandfarms.ca">jared@pinelandfarms.ca</a>
                    **NOTE** The <a class="link"
                        href="https://github.com/TheCodingJsoftware/HBNI-Audio-Stream-Recorder">HBNI
                        recorder</a> records all broadcasts by default, if you wish to be exempt from these
                    conditions,
                    the
                    recorder has list
                    of hosts will never be recorded. Just make sure when you start a broadcast, use the same host
                    name
                    each
                    time.
                </p>
                <h5> Why is the broadcast not finished or missing?
                </h5>
                <p>
                    Often times if a broadcast is not uploaded or is shorter then it should be it is because during
                    the
                    recording process we may have lost internet connection, this is something we cannot predict or
                    do
                    much
                    about, thats just how it is.
                </p>
                <h5>How long does it take to upload archives?</h5>
                <p>
                    Broadcasts should be succesfully uploaded within 5 minutes since its been on the air. This
                    greatly
                    depends on the length on the broadcast. Sometimes, when a broadcast has been split up into
                    multiple
                    parts or
                    failed to upload due to losing internet connection we may have to manually upload it which
                    can take
                    some
                    time.
                </p>
    </div>
</dialog>
<div class="overlay blur"></div>
<dialog id="download-dialog">
    <h3 class="center-align">Apps</h3>
    <button class="row responsive small-round"
        onclick="location.href='https://github.com/TheCodingJsoftware/HBNI-Audio-Stream-Listener/releases';">
        <i>desktop_windows</i>
        <span>Desktop</span>
    </button>
    <button class="row responsive small-round"
        onclick="location.href='https://apps.apple.com/ca/app/hbni-audio-streaming/id1611672333';">
        <i>ios</i>
        <span>Apple</span>
    </button>
    <button class="row responsive small-round"
        onclick="location.href='https://play.google.com/store/apps/details?id=com.thecodingjsoftware.hutteritechurch';">
        <i>android</i>
        <span>Android</span>
    </button>
</dialog>
<div class="overlay blur"></div>
<dialog id="info-dialog">
    <div class="right-align">
        <button class="transparent circle" onclick="ui('#info-dialog');">
            <i>close</i>
        </button>
    </div>
    <div class="row max center-align">
        <img class="responsive circle border" src="/static/icon.png" style="height: auto; max-width: 150px;">
    </div
    <div class="padding">
        <h5 class="small center-align">HBNI Audio Archive</h5>
        <p class="center-align medium-width">
            Browse and listen to archived
            broadcasts from the HBNI Audio
            Streaming Service.
        </p>
        <br>
        <p class="center-align">Developed with <i>favorite</i> by <a class="link" href="https://thecodingjsoftware.github.io/">TheCodingJ's</a></p>
    </div>
    <br>
    <article class="border" style="margin-top: auto;">
        <p class="center-align medium-width">
            For questions, comments, suggestions,
            or concerns about this service please
            email: <a class="link" href="mailto:jared@pinelandfarms.ca">jared@pinelandfarms.ca</a>.
        </p>
    </article>
</dialog>

<body class="dark">
    <nav class="bottom" id="bottom-nav" style="max-height: 50px;">
        <a href="javascript:void(0)" onclick="ui('#faq-dialog');">
            <i>help</i>
        </a>
        <a href="javascript:void(0)" onclick="ui('#download-dialog');">
            <i>apps</i>
        </a>
    </nav>
    <main class="responsive">
        <br>
        <div class="field label prefix border">
            <i>search</i>
            <input type="text" id="search">
            <label>Search</label>
        </div>
        <div class="no-results" style="display: none;">No recordings found</div>
        <div>
            <div class="tabs scroll left-align">
            {% for groupName in downloadableRecordings %}
                <a data-ui="#{{ groupName.replace(' ', '_') }}" {% if loop.first %}class="active" {% endif %}>
                    <i>
                        {% if "Days" in groupName or "Today" in groupName or "Yesterday" in groupName %}
                        today
                        {% elif "Week" in groupName %}
                        date_range
                        {% else %}
                        calendar_month
                        {% endif %}
                    </i>
                    <span>{{groupName}}</span>
                </a>
            {% endfor %}
            </div>
            {% for groupName in downloadableRecordings %}
            <div class="page {% if loop.first %}active{% endif %}" id="{{ groupName.replace(' ', '_') }}">
                <article class="scroll border small-round no-padding no-margin no-elevate no-space grid" id="contents">
                    {% for itemName, itemData in downloadableRecordings[groupName].items() %}
                    <article data-name="{{ itemName }}" class="small-round small-margin s12 m6 l4" id="article-version">
                        <div class="row">
                            <div class="max">
                                <h6 class="bottom-margin">{{ itemData["description"]}}</h6>
                                <div><i>artist</i> {{ itemData["host"].replace("/", "").title() }}</div>
                                <div><i>event</i> {{ itemData["date"].replace("_", ":") }}</div>
                                <div><i>schedule</i> {{ itemData["formatted_length"]}}</div>
                                <div class="row no-margin" style="max-height: 24.3px;">
                                    <div class="max"><i>web_traffic</i> {{ itemData["visit_count"]}} visits</div>
                                    <button class="chip circle link no-padding no-margin no-border">
                                        <i>info</i>
                                        <div class="tooltip max left">
                                            <span class="small-width">Visit Count: {{itemData["visit_count"]}}</span>
                                            <br>
                                            <span class="small-width">Latest Visit: {{itemData["latest_visit"]}}</span>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <nav class="row">
                            <button class="small-round" target="_blank" onclick="window.location.href='{{ itemData["download_link"] }}';">
                                <i>{% if "play_recording" in itemData['download_link'] %}play_arrow{% elif "mega" in itemData['download_link'] or "google" in itemData['download_link'] %}globe{% else %}download{% endif %}</i>
                                <span>{% if "play_recording" in itemData['download_link'] %}Play{% else %}Download{% endif %}</span>
                            </button>
                            <div class="max"></div>
                            {% if "Days" in groupName or "Yesterday" in groupName or "Today" in groupName %}
                            <div class="badge none">New</div>
                            {% endif %}
                            {% if "mega" in itemData['download_link'] %}
                            <div class="badge none"><i>cloud</i></div>
                            {% elif "google" in itemData['download_link'] %}
                            <div class="badge none"><i>add_to_drive</i></div>
                            {% endif %}
                        </nav>
                    </article>
                    {% endfor %}
                </article>
            </div>
            {% endfor %}
        </div>
        {% if recording_status %}
        <h4 class="center-align bottom-padding"> Currently Recording</h4>
        <div class="border small-round small-padding grid">
            {% for host, host_data in recording_status.items() %}
            <article class="no-padding s12 m6 l4" id="recording-card">
                <img class="responsive small top-round" src="/static/hbnilogo.png" style="height: auto; max-height: 200px; max-width: 400px;" id="recording-card-image">
                <div class="padding">
                    <progress></progress>
                    <h6>{{ host_data["description"] }}</h6>
                    <div><i>artist</i> {{host.replace("/", "").title()}}</div>
                    <div><i>event</i> {{ host_data["starting_time"] }}</div>
                    <div><i>schedule</i> {{ host_data["length"] }}</div>
                    <nav>
                        <button class="small-round" target="_blank"
                            onclick="location.href='{{ host_data["link"] }}';">
                            <i>record_voice_over</i>
                            <span>Listen</span>
                        </button>
                        <div class="max"></div>
                        <div class="badge none">New</div>
                    </nav>
                </div>
            </article>
            {% endfor %}
        </div>
        {% endif %}
    </main>
</body>
<script>
    const mode = () => {
        let currentMode = localStorage.getItem("mode") || "dark";
        let newMode = currentMode === "dark" ? "light" : "dark";
        localStorage.setItem("mode", newMode); // Save mode to localStorage
        ui("mode", newMode);
        updateIcon(newMode);
        updateImageSource();
        document.documentElement.classList.toggle("dark", newMode === "dark");
    };

    function updateImageSource() {
        const mode = localStorage.getItem('mode') || 'light';
        const images = document.querySelectorAll('img[id^="recording-card-image"]');
        images.forEach(image => {
            image.src = mode === 'dark' ? '/static/hbni_logo_dark.png' : '/static/hbnilogo.png';
        });
    }

    const updateIcon = (mode) => {
        const iconElements = document.querySelectorAll('#toggle-theme i');
        iconElements.forEach(iconElement => {
            iconElement.textContent = mode === "dark" ? "light_mode" : "dark_mode";
        });
    };

    function searchAndFilter() {
        const searchInput = document.getElementById('search');
        const query = searchInput.value.toLowerCase();
        const articles = document.querySelectorAll('#contents');
        let foundArticle = false;

        articles.forEach(function (article) {
            const articleVersions = article.querySelectorAll('#article-version');
            articleVersions.forEach(function (articleVersion) {
                const name = articleVersion.getAttribute('data-name').toLowerCase();
                if (name.includes(query)) {
                    articleVersion.style.display = 'block';
                    foundArticle = true;
                } else {
                    articleVersion.style.display = 'none';
                }
            });


            const noResults = document.querySelector('.no-results');
            if (foundArticle) {
                noResults.style.display = 'none';
            } else {
                noResults.style.display = 'block';
            }
        });
    }
    document.addEventListener('DOMContentLoaded', function () {
        let savedMode = localStorage.getItem("mode") || "light";
        ui("mode", savedMode);
        updateIcon(savedMode);
        document.documentElement.classList.toggle("dark", savedMode === "dark");
        const searchInput = document.getElementById('search');

        const header = document.getElementById('main-header');
        const bottomNav = document.getElementById('bottom-nav');

        const observer = new IntersectionObserver(function (entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    header.style.display = 'block';
                } else {
                    header.style.display = 'none';
                }
            });
        });

        observer.observe(bottomNav);
        searchInput.addEventListener('input', searchAndFilter);
        updateImageSource();
    });
</script>

</html>
